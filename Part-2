1. Amazon Elastic Compute Cloud (Amazon EC2) is a web service that provides resizable compute capacity in the cloud. It's just a virtual server (or servers) in the cloud.
	2. Amazon EC2 reduces the time required to obtain and boot new server instances to minutes, allowing you to quickly scale capacity, both up and down, as your computing requirements change.

** EC2 Pricing Models:
	1. On Demand: Allows you to pay a fixed rate by the hour (or by the second) with no commitment.
	2. Reserved: Provides you with a capacity reservation, and offer significant discount on the hourly charge for an instance. Contracts are 1 - 3 year terms. Higher discount with upfront payments and longer contracts.
	3. Spot: Enables you to bid whatever price you want for instance capacity, providing for even greater savings if your applications have flexible start and end times.
	4. Dedicated Hosts: Physical EC2 server dedicated for your use. Dedicated hosts can help reduce the costs by allowing you to use your existing server-bound software licenses.

	- On Demand pricing is useful for:
		1. Users that want the low cost and flexibility of Amazon EC2 without any up-front payment for long-term commitment.
		2. Applications with short term, spiky or unpredictable workloads that cannot be interrupted
		3. Applications being developed or tested on Amazon EC2 for the first time.

	- Reserved Pricing is useful for:
		1. Applications with steady or predictable usage.
		2. Applications that require reserved capacity.
		3. Users able to make upfront payments to reduce their total computing costs even further.
	
	- Reserved Pricing Types:
		1. Standard Reserved Instances: These offer up to 75% off on demand instances. The more you pay up front and the longer the contract, the greater the discount.
		2. Convertible Reserved Instances: These offer up to 54% off on demand capability to change the attributed of the RI as long as the exchange results in creation of Reserved Instances of equal or greater value.
		3. Scheduled Reserved Instances: These are available to launch within the time windows you reserve. This option allows you to match your capacity reservation to a predictable recurring schedule that only requires a fraction of a day, a week or a month.

	- Spot pricing is useful for:
		1. Applications that have flexible start and end times.
		2. Applications that are only feasible at very low compute prices.
		3. Users with urgent computing needs for large amounts of additional capacity.
	
	- Dedicated Hosts pricing is useful for:
		1. Useful for regulatory requirements that may not support multi-tenant virtualisation.
		2. Great for licensing which doesn't support multi-tenancy or cloud.
		3. Can be purchased On-Demand (hourly)
		4. Can be purchased as a Reservation for up to 70% off the On-Demand price.

	- EC2 instance classes FIGHTDRMCPXZ
		1. F1 - For FPGA (Filed Programmable gate array) - Genomics research, financial analytics, real-time video processing, big data etc
		2. I3 - For IOPS (High Speed Storage) - NoSQL DBs, Data Warehousing etc
		3. G3 - Graphics Intensive (Video Encoding/3D Application Streaming) 
		4. H1 - High Disk Throughput (MapReduced-based networks, distributed file systems such as HDFS and MapR-FS)
		5. T3 - Low Cost and Cheap general purpose (think T2 micro) (Web Servers/Small DB's)
		6. D2 - Dense Storage (FileServers/Data Warehousing/Hadoop)
		7. R5 - RAM, Memory optimised (Memory Intensive Apps/DBs)
		8. M5 - Main choice for general purpose apps (Application Servers)
		9. C5 - Compute Optimised (CPU Intensive Apps/DBs)
	 10. P3 - Graphics/General Purpose GPU (think Pics) (Machine Leaning, Bit Coin Mining etc)
	 11. X1 - Extreme Memory (SAP HANA/Apache Spark etc)
	 12. Z1D - Extreme Memory and CPU (Ideal for electronic design automation (EDA) and certain relational database workloads with high per-core licensing costs.)
	 13. A1 - Arm-based workloads (Scale-out workloads such as web servers)
	 14. U-6tb1 - Bare Metal (Bare metal capabilities that eliminate virtualisation overhead)

* EC2 Exam Tips:
	1. EC2 is a compute based service. It is not server less. It's a Server!
	2. Use a private key to connect to EC2.
	3. Common Ports: Linux (port 22), Microsoft - RDP (port 3389), HTTP (80) and HTTPS (443)
	4. Security groups are virtual firewalls. To let everything in 0.0.0.0/0. To let a single IP address in X.X.X.X/32 (32 means this ip address)
	5. Always design for failure. Have one EC2 instance in each availability zone.
	6. Root device volumes can be encrypted now (a popular exam topic)
	7. Termination protection is turned off by default, you must turn it on.
	8. On an EBS-backed instance, the default action is for the root EBS volume to be deleted when the instance is terminated. Any additional EBS volumes by default won't be deleted.
	9. EBS Root volumes of your DEFAULT AMI's CAN be encrypted. You can also use a third party tool (such as bit locker etc) to encrypt the root volume, or this can be done when creating AMI's (lab to follow) in the AWS console or using the API.
 10. Additional volumes can be encrypted as well.

- EC2 Exam Tips: Amazon Elastic Compute Cloud (Amazon EC2) is a web service that provided resizable compute capacity in the cloud. Amazon EC2 reduces the time required to obtain and boot new server instances to minutes, allowing you to quickly scale capacity, both up and down, as your computing requirements change.
	1. On Demand: Allows you to pay a fixed rate by the hour (or by the second) with no commitment.
	2. Reserved: Provides you with a capacity reservation and offer a significant discount on the hourly charge for an instance. Contract Terms are 1 year or 3 year terms.
	3. Spot: Enables you to bid whatever price you want for instance capacity, providing for even greater savings if your application have flexible start and end times.
	   Imp Note: If the spot instance is terminated by Amazon EC2, you will not be charged for a partial hour of usage. However, if you terminate the instance yourself, you will be charged for any hour in which the instance ran.
	4. Dedicated Hosts: Physical EC2 server dedicated for your use. Dedicated Hosts can help reduce costs by allowing you to use your existing server-bound software licenses.

* Security Groups Exam Tips:
	1. All inbound traffic is blocked by default - so we enable some IP and ports using Security Groups.
	2. All outbound traffic is allowed.
	3. Security Groups are STATEFUL, when you create an inbound rule and an outbound rule is automatically created.
	4. NACL's are STATELESS, when you create an inbound rule and an outbound rule is not automatically created.
	5. You CANNOT block specific IP's/Port's using Security Groups instead use Network Access Control Lists.
	6. You can have any number of EC2 instances within a security group.
	7. You can have multiple Security Groups attached/assigned to EC2 instances.
	8. Changes to Security Groups take effect immediately.
	9. You can specify allows rule, but not deny rules.
	
** EBS 101
	Amazon Elastic Block Storage (EBS) provides persistent block storage volumes for use with Amazon EC2 instances in the AWS cloud. 
	Each Amazon EBS volume is automatically replicated within it's Availability Zone to protect you from component failure, offering high availability and durability.
 
	- 5 different types of EBS Storage:
	  SSD:
		1. General purpose SSD (GP2) - balances prices and performance for a wide variety of workloads
		2. Provisioned IOPS SSD (IO1) - higher-performance SSD volume for mission-critical low-latency or high throughput workloads.

	  Magnetic/HDD:
		1. Throughput Optimised Hard Disk Drive (ST1) - Low cost HDD volume designed for frequently accessed, throughput-intensive workloads.
		2. Cold Hard Disk Drive (SC1) - Lowest cost HDD volume designed for less frequently accessed workloads (File Servers)
		3. Magnetic - Previous generation and some point will probably be phased out.
	
	- Compare EBS Types (Exam Tip: Important: API names are important for the exam)
	https://aws.amazon.com/ebs/features/

** EBS Volumes & Snapshots - Lab (Exam Tips)
	1. Important: Where-ever you have EC2 instance it's EBS volume will be in the same region.
	2. Important: When we terminate EC2 instance, it removes EBS volumes automatically.
	3. Volumes exist on EBS. Think of EBS as a virtual hard disk.
	4. Snapshots exist on S3. Think of snapshots as a photograph of the disk.
	5. Snapshots are point in time copies of Volumes.
	6. Snapshots are incremental - this means that only the blocks that have changed since your last snapshot are moved to S3.
	7. If this is your first snapshot, it may take some time to create.
	8. To create a snapshot for Amazon EBS volumes that serve as a root devices, you should stop the instance before taking the snapshot.
	9. However you can take a snap while the instance is running.
 10. You can create AMI's from both Volumes and Snapshots.
 11. You can change EBS volume sizes on the fly, including changing the size and storage type.
 12. Volumes will be in the same Availability Zone as the EC2 instance.
 13. To move an EC2 volume from one AZ to another, take a snapshot of it, create an AMI from the snapshot and then use the AMI to launch the EC2 instance in a new AZ.
 14. To move an EC2 volume from one region to another, take a snapshot of it, create an AMI from the snapshot and then copy the AMI from one region to other. Then use the copied AMI to launch the new EC2 instance in the new region.
 15. Virtualisation Type: PV or HVM, use Hardware-assisted virtualisation as it will give lot more different EC2 instance types.
     Linux Amazon Machine Images use one of two types of virtualisation: paravirtual (PV) or hardware virtual machine (HVM). The main differences between PV and HVM AMIs are the way in which they boot and whether they can take advantage of special hardware extensions (CPU, network, and storage) for better performance.

	   For the best performance, we recommend that you use current generation instance types and HVM AMIs when you launch your instances

	16. Snapshots of encrypted volumes are encrypted automatically.
	17. Volumes restored from encrypted snapshots are encrypted automatically.
	18. You can share snapshots, but only if they are unencrypted.
	19. These snapshots can be shared with other AWS accounts or made public.

** AMI Types (EBS vs. Instance Store) - Important for the exam
	1. You can select your AMI based on:
		1. Region (see Regions and AZ's)
		2. Operating System.
		3. Architecture (32-bit or 64-bit)
		4. Launch Permissions
		5. Storage for the Root Device (Root Device Volume)
			 5.1 Instance Store (EPHEMERAL STORAGE)
			 5.2 EBS Backed Volumes
	
	2. All AMI's are categorised as either backed by Amazon EBS or backed by Instance Store
		2.1 For EBS Volumes: The root device for an instance launched from the Ami is an Amazon EBS volume created from an Amazon EBS snapshot
		2.2 For Instance Store Volumes: The root device for an instance launched from the AMI is an instance store volume created from a template stored in Amazon S3.

   AMI Types (EBS vs. Instance Store) - Exam Tips
	
	1. Instance Store Volumes are sometimes called Ephemeral Storage (For some reason if the underlying hypervisor is stopped then we are going to loose all our data)
	2. You cannot see the volumes of Instance Store EC2 under volumes because its Instance Store.
	3. Instance Store volumes cannot be stopped. If the underlying host fails, you will lose your data.
	4. EBS backed instances can be stopped. You will not lose the data on this instance if it is stopped.
	5. You can reboot both, you will not loose data.
	6. By default, both ROOT volumes will be deleted on termination. However, with EBS volumes, you can tell AWS to keep the root device volume.

** ENI vs. ENA vs. EFA (Important for the exam - Scenario based questions)

	1. ENI: Elastic Network Interface - essentially a virtual network card.
		
		1.1 An ENI is simply virtual network card on your EC2 instance, when you provision an EC2 instance, it's going to have a ENI attached to it automatically, and then you can add additional ones.
		1.2 It basically allows a primary private IPv4 address, from the IPv4 address range of your VPC.
		1.3 it also allows one or more secondary private IPv4 addresses from the IPv4 address range of your VPC.
		1.4 With an ENI you get one elastic IP address, per private IPv4 address
		1.5 You get one public IPv4 address 
		1.6 You get one or more IPv6 addresses.
		1.7 One or more security groups
		1.8 A MAC address source
		1.9 A source/destination check flag
		2.0 A description of what the ENI is.

		Scenarios for Network Interfaces:
			1. You might have multiple ENIs if you want to create a management network and you wanted to have, that separate to your production network.
			2. You can also, have an additional ENI if you're using network and security appliances in your VPC.
			3. It also allows you by having multiple ENIs you can create dual-homed instances with workloads or roles on distinct subnets.
			4. You might have your production subnet, and then you might have your database subnet, and you might want to segregate that by using multiple ENIs, and it allows you to 			   create low budget high availability solutions.

	2. EN: Enhanced Networking uses what's called single root I/O virtualisation or SR-IOV, to provide high performance networking capabilities to unsupported instance types.
	       ENA is a subset of Enhanced networking
		
		2.1 Is uses single root IO virtualisation, or SR-IOV, to provide high performance networking capabilities on supported instance types.
		    SR-IOV is a method of device virtualisation, that provides higher IO performance and lower CPU utilisation, when compared to traditional network interfaces.
		    So it's just a way of speeding up your network essentially.

		2.2 Enhanced Networking provides higher bandwidth, higher packets per second performance consistently lower it into instance latencies, and there's no additional charge for using 			  Enhanced Networking, but your EC2 instance does have to support it. 

		2.3 Use Enhanced Networking where you want good network performance.

		2.4 Depending on your instance type, Enhance Networking can be enabled using two methodologies,

			2.4.1 Elastic Network Adapter or ENA, which supports network speeds of up to 100 gigabits per second for supported instance types.
				
			Or 
			
			Intel 82599 Virtual Function, or VF interface, which supports network speeds of up to 10 gigabits per second, for supported instance types.
			And this is typically used on older instances.

			Tip: In any scenario, question that you get in your exam, you probably want to choose ENA (100 Gbps) over VF (10 Gbps)

	3. Elastic Fabric Adapter: A network device that you attach to your EC2 instance to accelerate High Performance Compute, so HPC and machine learning applications.

		3.1 An Elastic Fabric Adapter (EFA) is a network device that you can attach to your EC2 instance to accelerate High Performance Computing or HPC, and machine learning applications.

		3.2 It's really important, if you get a scenario question and they're talking about ENI versus ENA versus EFA, and they're talking about HPC and machine learning, then you want to 			  choose an Elastic Fabric Adapter.
	
		3.3 Elastic Fabric Adapters, provides lower and more consistent latency and higher throughputs than TCP transport, traditionally used in cloud based, HPC systems.
		
		3.4 EFA can use OS-bypass. OS-bypass enables high performance compute and machine learning applications to bypass the operating system kernel and to communicate directly with the EFA device. It makes it a lot faster with a lot lower latency. However, it's not supported on Windows currently, it's only supported with Linux.

	ENI vs. ENA vs. EFA - Exam Tips

		In the exam you will be given different scenario questions and you'll be asked to choose whether you should be using an ENI enhance networking or an Elastic Fabric Adapter

		1. ENI 
				For basic networking, perhaps you need a separate management workload to your production network or a separate logging network and you need to do this at a low cost.
				In this scenario, just use multiple ENI's for each network.
	
		2. Enhanced Network 
				For when you need speeds between 10 gigabits per second and 100 gigabits per second anywhere where you need reliable high throughput.
	
		3. Elastic Fabric Adapter
				For when you need to accelerate, High Performance Computing, HPC and machine learning applications or if you need to do an OS bypass.
				If you see a scenario question mentioning HPC, or machine learning or asking about OS-bypass, then you want to choose an Elastic Fabric Adapter.

** Encrypted Root Device Volumes & Snapshots - LAB (Exam Tips)
		1. Snapshots of encrypted volumes are encrypted automatically.
		2. Volumes resorted from encrypted snapshots are encrypted automatically.
		3. You can share snapshots, but only if they are unencrypted.
		4. These snapshots can be shared with other AWS accounts or made public.
		5. You can now encrypt root device volumes upon creation of the EC2 instance.
		6. If for some reason, if we didn't encrypt the root device volume then the process to encrypt is as follows
			6.1 Create a Snapshot of the unencrypted root device volume
			6.2 Create a copy of the Snapshot and select the encrypt option
			6.3 Create an AMI from the encrypted Snapshot.
			6.4 Use that AMI to launch new encrypted instances.
		
** Spot Instances & Spot Fleets
	1. AMAZON EC2 Spot Instances let you take advantage of unused EC2 capacity in the AWS cloud. 
	2. Spot instances are available at up to a 90% discount compared to On-Demand prices.
	3. You can use Spot Instances for various stateless, fault-tolerant or flexible applications, such as 
		3.1 Big data and analytics
		3.2 Containerised workloads
		3.3 CI/CD 
		3.4 Web Services
		3.5 High-performance computing (HPC)
		3.6 Image and media rendering 
		3.7 and other test and development workloads

	4. Spot Instances can be used with flexible workloads (can be terminated) 

	5. Spot Instances are not good for
		5.1 Critical applications/Persistent workloads.
		5.2 Critical Jobs
		5.3 Databases

	6. To use Spot Instances, you must first decide on your maximum Spot price. The instance will be provisioned as long as the Spot price is BELOW your maximum Spot price.
	7. The hourly Spot price varies depending on capacity and region.
	8. If the Spot price goes above your maximum, you have two minutes to choose whether to stop or terminate your instance.
	9. You may also use a Spot Block to stop your Spot Instances from being terminated even if the Spot price goes over your max Spot price. You can set Spot blocks for between one to six hours currently.
	10. How to terminate Spot Instances: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-requests.html

** Spot Fleets
	1. Spot fleets and a spot fleet is just a collection of spot instances and optionally on-demand instances.

	2. The spot fleet attempts to launch the number of spot and on-demand instances to meet the target capacity that you specified in the spot fleet requests. The request for spot instances is fulfilled if there's available capacity and if the maximum price that you specified in the request exceeds the current spot price. The spot fleet also attempts to maintain its target capacity fleet,
if your spot instances are interrupted. So it will relaunch those instances. 
	3. Spot fleets, will try and match the get capacity with your price restraints 
		3.1 Set up different launch pools and define things like your EC2 instance type, your operating system and Availability Zone
		3.2 You can have multiple pools and the fleet will choose the best way to implement depending on the strategy that you define
		3.3 Spot fleets will stop launching instances once reach your price threshold or your capacity desire.

	4 Strategies: You can have the following different strategies that you can have with spot fleets. 
		4.1 capacityOptimized: The spot instances comes from the pool with optimal capacity for the number of instances launching. So you're basically guaranteeing that you have a certain amount of capacity.
		4.2 lowestPrice: The spot instances come from the pool with the lowest price and that's the default strategy.
		4.3 Diversified: The spot instances distributed across all your different pools that you defined
		4.4 InstancePoolsToUseCount: The spot instances are distributed across the number of spot instance pools that you specify and the parameter is only valid when used in combination with the lowest price. So this is kind of like a combination of diversified with lowest price, but with diversified, it's using all the pools. 
With instance pools to use count you define which pools that you want. It will launch in those pools at the lowest price.

Exam Tips:
	1. Spot instances can save you up to 90% of on-demand instances.
	2. Useful for any type of computing where you don't need persistent storage.So ephemeral computing, for example
	3. You can block spot instances from terminating by using spot block
	4. A Spot Fleet is a collection of spot instances and optionally on-demand instances
		
** EC2 Hibernate:

	We have learned so far we can stop and terminate EC2 instances. If we stop the instance, the data is kept on the disk (EBS) and will remain on the disk until the EC2 instance is started.
	If the instance is terminated, then by default the root device volume will also be terminated.

	When we start our EC2 instance, the following happens:
		1. OS boots up
		2. User data script is run (bootstrap scripts)
		3. Applications start (can take some time)

	EC2 Hibernate: When you hibernate an EC2 instance, the OS is told to perform hibernation (suspend-to-disk). Hibernation saves the content from the instance memory (RAM) to your Amazon EBS root volume. We persist the instance's Amazon EBS root volume and any attached Amazon EBS data volumes.
	
	When you start your instance out of Hibernation:
		1. The Amazon EBS root volume is restored to its previous state
		2. The RAM contents are reloaded
		3. The processes that were previously running on the instance are resumed.
		4. Previously attached data volumes are reattached and the instance retains its instance ID.

	With EC2 Hibernate, the instance boots much faster. The OS does not need to reboot because the in-memory state (RAM) is preserved. 
	This is useful for:
		1. Long-running processes
		2. Services that take time to initialise
 
	Important: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Hibernate.html
	
	Exam Tips:
		1. EC2 Hibernate preserves the in-memory RAM on persistent storage (EBS)
		2. Much faster to boot up because you do not need to reload the OS
		3. Instance RAM must be less than 150 GB
		4. Instance families include C3, C4, C5, M3, M4, M5, R3, R4 and R5
		5. Available for Windows, Amazon Linux 2 AMI, and Ubuntu
		6. Instances can't be hibernated for more than 60 days.
		7. Available for On-Demand instances and Reserved Instances.
		8. To hibernate an instance, it must first be enabled for hibernation. To enable hibernation, you must do it while launching the instance.
		   Important: You can't enable or disable hibernation for an instance after you launch it.

** CloudWatch 101

	1. CloudWatch is to monitor performance
	2. Monitors
		2.1 EC2 Instances
		2.2 Autoscaling Groups
		2.3 Elastic Load Balancers
		2.4 Route53 Health Checks
	3. Storage and Content Delivery
		3.1 EBS Volumes
		3.2 Storage Gateways
		3.3 CloudFront
	4. CloudWatch and Ec2: Important: It can monitor host level metrics such as CPU, Network, Status check and Disk

* CloudWatch 101 - Exam Tips:
	1. CloudWatch is used for monitoring performance.
	2. CloudWatch can monitor most of AWS as well as your applications that run on AWS
	3. CloudWatch with EC2 will monitor events every 5 mins by default.
	4. You can have 1 min interval by turning on detailed monitoring
	5. You can create CloudWatch alarms which trigger not monitoring.
	6. CloudWatch is all about performance.
	7. CloudTrail is all about auditing.
	8. Standard Monitoring is 5 mins
	9. Detailed monitoring is 1 min with additional cost.
       10. Dashboards: Creates dashboards to see what is happening with your AWS environment
       11. Alarms: Allows you to set Alarms that notify you when particular thresholds are hit.
       12. Events: CloudWatch Events helps you to respond to state changes in your AWS resources.
       13. Logs - CloudWatch Logs helps you to aggregate, monitor and store logs. 

** CloudTrail vs CloudWatch
	- CloudWatch monitors performance.
	- CloudTrail monitors API calls in the AWS platform.

	CloudTrail (Exam Tips)
		1. Per AWS account and is enabled per region.
		2. Can consolidate logs using S3 bucket:
			2.1 Turn on CloudTrail in paying account.
			2.2 Create a bucket policy that allows cross-account access.
			2.3 Turn on CloudTrail in the other accounts and use the bucket in the paying account.

** AWS Command Line (CLI) Lab

*Using the command line: Exam Tips:
	1. You can interact with AWS in 3 different ways
		a. Using the console
		b. Using the command line interface (CLI)
		c. Using the SDK's
	2. You will need to set up access in IAM.
	3. Command themselves are not in the exam but some basic commands will be useful to know for real life.

*Using Roles: Exam Tips
	1. Roles are much more secure than using access key id's and secret access keys and are easier to manage.
	2. Adding/Modifying policies to roles are instantaneous. You can apply roles to EC2 instances anytime. When you do this, the change takes place immediately.
	3. Roles are universal. You do not need to specify what region they are in, similar to users.		
	
** IAM  Management Roles - Lab (Exam Tips)
	1. Roles are more secure than storing your access key and secret access key on individual EC2 instances.
	2. Roles are easier to manage.
	3. Roles can be assigned to an EC2 instance after it is created using both the console & command line.
	4. Roles are universal.

** Bootstrap scripts

** Instance Metadata - Demo
	Used to get information about an instance (such as public ip)

	In EC2: 
	1. curl http://169.254.169.254/latest/user-data (stores bootstrap scripts)
	2. curl http://169.254.169.254/latest/meta-data/ (stores meta-data)
	3. curl http://169.254.169.254/latest/public-ipv4 (gives public ip)

** EFS Lab (REPEAT)
	EFS stands for Elastic File System and it's a file storage service for Amazon's Elastic Compute Cloud or EC2 instances.

	Important: So it's similar to EBS, except where you've got EBS, you can only mount your virtual disk to one EC2 instance and that's just the way it works.
	You cannot have an EC2 instance, two EC2 instances sharing an EBS volume.
	
	However, you can have them sharing an EFS volume. So EFS is an easy way to use and provide a simple interface that allows you to create and configure file systems 
	quickly and easily and with the EFS, storage capacity is elastic, growing and shrinking automatically as you add and remove files so your applications have the storage 
	they need when they need it. 

	So it is actually really cool. Basically if you provision an EFS instance,
	it will just grow automatically so you could put like one terabyte file on there and then add another terabyte, you don't need to pre-provision storage like you do with EBS.
	So EFS is a way, it's great for basically file servers, it's a great way to share files between different EC2 instances. So as always, the best way to learn EFS is to go in and start using it.

	What we're going to do is we're going to create two little EC2 instances, we're going to run a bootstrap script on them to install some tools as well as Apache
	and then what we're going to do is we're going to go and mount this, our var dub-dub-dub HTML directory to an EFS mount point and then that way, we only need one copy of our website or   our website will be stored on EFS and when we go and update or make changes to it we're just that those changes are replicated automatically across all our EC2 instances. So if you've    got the time, please join me in the AWS console.

	For the Lab:
	#!/bin/bash
	yum update -y
	yum install http -y
	service httpd start
	chkconfig httpd on
	yum install -y amazon-efs-utils

	Exam Tips:
		1. Supports the Network File System version 4 (NFSv4) protocol
		2. You only pay for the storage you use (no pre-provisioning required)
		3. Can scale up to the petabytes
		4. Can support thousands of concurrent NFS connections.
		5. Data is stored across multiple AZ's within a region
		6. Read After Write Consistency.
	
** Amazon FSx for Windows and Amazon FSx for Lustre
 
  1. Amazon Fsx for Windows File Server provides a fully managed native Microsoft Windows file system so you can easily move your Windows-based applications that require file storage to AWS. 
     Amazon FSx is built on Windows Server.

	How is Windows FSx different to EFS
	- Windows FSx:
		1. A managed Windows Server that runs Windows Server Message Block (SMB)-based file services.
		2. Designed for Windows and Windows applications.
		3. Supports AD users, access control lists, groups and security policies, along with Distributed File System (DFS) namespaces and replication.

	- EFS:
		1. A managed NFS filer for EC2 instances based on Network File System (NFS) version 4.
		2. One of the first network file sharing protocols native to Unix and Linux.

  2. Amazon FSx for Lustre is a fully managed file system that is optimised for compute-intensive workloads, such as high-performance computing, machine learning, media data processing workflows, and electronic design automation (EDA).

     With Amazon FSx, you can launch and run a Lustre file system that can process massive data sets at up to hundreds of gigabytes per second of throughput, millions of IOPS and sub-millisecond latencies.

	How is Amazon FSx for Lustre different to EFS
	- Lustre FSx:
		1. Designed specifically for fast processing of workloads such as machine learning, high performance computing (HOC), video processing, financial modelling and electronic design automation (EDA).
		2. Lets you launch and run a file system that provides sub-millisecond access to your data and allows you to read and write data at speeds of up to hundreds of gigabytes per second of throughput and millions of IOPS.

	- EFS:
		1. A managed NFS filer for EC2 instances based on Network File System (NFS) version 4.
		2. One of the first network file sharing protocols native to Unix and Linux.
	
	* Exam Tips: In the exam you'll be given different scenarios and asked to choose whether you should use an EFS, FSx for Windows or FSx for Lustre
		1. EFS:
			When you need distributed, highly resilient storage for Linux instances and Linux-based applications.

		2. Amazon FSx for Windows:
			When you need centralised storage for Windows-based applications such as Sharepoint, Microsoft SQL Server, Workspaces, IIS Web Server or any other native Microsoft Application.
		
		3. Amazon FSx for Lustre:
			When you need high-speed, high-capacity distributed storage. This will be for applications that do High CPU, financial modelling etc. Remember that FSx for Lustre can store data directly to S3.

** EC2 Placement Groups 
	Three types of Placement groups:
		1. Clustered Placement Groups: A cluster placement group is grouping of instances within a single AZ. 
		   Placement groups are recommended for applications that need low latency, high n/w throughput, or both.
		   Only certain instances can be launched in to a Clustered Placement Group.

		2. Spread Placement Groups: A spread placement group is a group of instances that are each placed on distinct underlying hardware.
		   Spread placement groups are recommended for applications that have a small number of critical instances that should be kept separate from each other.
		   THINK INDIVIDUAL INSTANCES.

		3. Partitioned Placement Groups: When using partition placement groups, Amazon divides each group into logical segments called partitions. 
		   Amazon EC2 ensures that each partition with a placement group has its own set of racks. 
	     No two partitions within a placement group share the same racks, allowing you to isolate the impact of h/w failure within your application.
		   THINK MULTIPLE INSTANCES. 
		   Use case: HDFS, HBase, Hadoop, Cassandra and Kafka

* EC2 Placement Groups - Exam Tips
		1. A Clustered placement group can't span multiple AZ's.
		2. A spread placement and partitioned can.
		3. The name you specify for a placement group must be unique within your AWS account.
		4. Only certain types of instances can be launched in a placement group (Compute Optimised, GPU, Memory Optimised, Storage Optimised)
		5. AWS recommend homogeneous instances within clustered placement groups.
		6. You can't merge placement groups.
		7. You can move an existing instance into a placement group. Before you move the instance, the instance must be in the stopped state.
	     You can move or remove an instance using the AWS CLI or AWS SDK, you can't do it via the console yet.

** HPC on AWS - Exam Tips:

	It's never been easier to get started with high-performance compute (HPC) that in any other time in history - and AWS is the perfect place to perform it.
	
	You can create a large number of resources in almost no time. You only pay for the resources yo use - and once finished, you can destroy the resources.
	
	HPC is used for industries such as genomics, finance and financial risk modelling, machine learning, weather prediction and even autonomous driving.

	What are the different services we can use to achieve HPC on AWS?
	1. Data Transfer: 
		a. Snowball, Snowmobile (terabytes/petabytes worth of data)
		b. AWS Data Sync to store S3, EFS, Fsx for windows ... etc
		c. AWS Direct Connect: Is a cloud service solution that makes it easy to establish a dedicated network connection from your premises to AWS. 
		   Using AWS Direct Connect, you can establish private connectivity between AWS and your data centre, office or colocation environment - which, in many cases,
		   can reduce your network costs, increase bandwidth throughput and provide a more consistent network experience than internet-base connections.

	2. Compute and networking:
		a. EC2 instances that are GPU or CPU optimised
		b. EC2 fleets (Spot Instances or Spot Fleets)
		c. Placement Groups (Cluster Placement groups)
		d. Enhanced networking
			1. It uses single root I/O virtualisation (SR-IOV) to provide high-performance n/w capabilities on supported instance types.
			   SR-IOV is a method of device virtualisation that provides high I/O performance and lower CPU utilisation when compared to traditional virtualised n/w interfaces.

			2. Enhanced networking provides higher bandwidth, higher packet per second (PPS) performance, and consistency lower inter-instance latencies. 
			   There is no additional charge for using enhanced networking.
	
			3. Use where you want for network performance.
			
		e. Elastic Network Adapters

			2. Depending on your instance type, Enhance Networking can be enabled using two methodologies,

				1.1 Elastic Network Adapter or ENA, which supports network speeds of up to 100 gigabits per second for supported instance types.
				
				Or 
			
				Intel 82599 Virtual Function, or VF interface, which supports network speeds of up to 10 gigabits per second, for supported instance types.
				And this is typically used on older instances.

				Tip: In any scenario, question that you get in your exam, you probably want to choose ENA (100 Gbps) over VF (10 Gbps),

		f. Elastic Fabric Adapters
			3. Elastic Fabric Adapter: A network device that you attach to your EC2 instance to accelerate High Performance Compute, so HPC and machine learning applications.

			3.1 An Elastic Fabric Adapter (EFA) is a network device that you can attach to your EC2 instance to accelerate High Performance Computing or HPC, and machine learning applications.

			3.2 It's really important, if you get a scenario question and they're talking about ENI versus EFA versus EFA, and they're talking about HPC and machine learning, then you want to 			    choose an Elastic Fabric Adapter.
	
			3.3 Elastic Fabric Adapters, provides lower and more consistent latency and higher throughputs than TCP transport, traditionally used in cloud based, HPC systems.
		
			3.4 EFA can use OS-bypass. OS-bypass enables high performance compute and machine learning applications to bypass the operating system kernel and to communicate directly with the EFA device. It makes it a lot faster with a lot lower latency. However, it's not supported on Windows currently, it's only supported with Linux.


	3. Storage: What are the storage services that allow us to achieve HPC on AWS

		3.1 Instance-attached storage:
			3.1.1 EBS: Scale up to 64K IOPS with Provisioned IOPS (PIOPS)
			3.1.2 Instance Store: Scale to millions of IOPS; low latency

		3.2 Network Storage:
			3.2.1 Amazon S3: Distributed object-based storage; not a file system
			3.2.2 Amazon EFS: Scale IOPS based on total size, or use provisioned IOPS
			3.2.3 Amazon FSx for Lustre: HPC-optimised distributed file system; millions of IOPS, which is also backed by S3.

	4. Orchestration and automation:
			
		4.1 AWS Batch
			4.1.1 AWS Batch enables developers, scientists and engineers to easily and efficiently run hundreds of thousands of batch computing jobs on AWS.
			4.1.2 AWS Batch supports multi-node parallel jobs, which allows your to run a single job that spans multiple EC2 instances.
			4.1.3 You can easily schedule jobs and launch EC2 instances according to your needs.
	
		4.2 AWS Parallel Cluster
			4.2.1 Open-source cluster management tools that makes it easy for you to deploy and manage HPC clusters on AWS.
			4.2.2 Parallel Cluster uses a simple text file to model and provision all the resources needed for your HPC applications in an automated and secure manner.	
			4.2.3 Automate creation of VPC, subnet, cluster type and instance types.
		
** AWS WAF
	1. AWS WAF is a web application firewall that lets you monitor the HTTP and HTTPS requests that are forwarded to Amazon CloudFront, an application load balancer (Layer 7) or API Gateway.
	2. AWS WAF also lets you control access to your content (WAF can see Query String parameters, info sent to web servers)
	3. You can configure conditions such as what IP addresses are allowed to make this request or what query string parameters need to be passed for the request to be allowed
	4. Then the application load balancer or CloudFront or API Gateway will either allow this content to be received or to give a HTTP 403 status code.

	At its most basic level, AWS WAF allows 3 different behaviours
	1. Allow all request except the ones you specify.
	2. Block all request except the ones you specify.
	3. Count the requests that match the properties you specify.

	Extra protection against web attacks using conditions you specify. You can define conditions by using characteristics of web requests such as:
	1. IP addresses that requests originate from.
	2. Country that requests originate from.
	3. Values in request headers.
	4. Strings that appear in requests, either specific strings or string that match regular expressions
	5. Length of requests.
	6. Presence of SQL code that is likely to be malicious (known as SQL injection)
	7. Presence of a script that is likely to be malicious (known as cross-site scripting)

	In the exam you will be given different scenarios and you will be asked how to block malicious IP addresses
	a. Use AWS WAF
	b. Use Network ACL's - Covered under VPC section of this course.


** EC2 Summary - Same as EC2 notes

** Hands on Lab: Using AWS Tags and Resource Groups in AWS 

** Hands on Lab: Creating and Working with an EC2 Instance in AWS

** Hands on Lab: Using EC2 Roles and Instance Profiles in AWS

** QUIZ
1. Amazon FSx for Windows File Server provides a fully managed native Microsoft Windows file system so you can easily move your Windows-based applications that require shared file storage to AWS. EBS Multi Attach allows you to attach a volume to up to 16 instances, but would have issues across multiple availability zones, and could not use NTFS natively. EFS uses the NFS protocol, and is explicitly not supported on Windows. S3 is object-based storage, and would not be suitable as the backend for a file server

2. You can control whether an EBS root volume is deleted when its associated instance is terminated. The default delete-on-termination behaviour depends on whether the volume is a root volume, or an additional volume. By default, the DeleteOnTermination attribute for root volumes is set to 'true.' However, this attribute may be changed at launch by using either the AWS Console or the command line. For an instance that is already running, the DeleteOnTermination attribute must be changed using the CLI.

3. Which of the following features only relate to Spread Placement Groups?
There is no charge for creating a placement group
The placement group can only have 7 running instances per Availability Zone
Instances must be deployed in a single Availability Zone
The name of your placement group must be unique within your AWS Account

The placement group can only have 7 running instances per Availability Zone
"Single Availability Zone" (which is only true of Cluster Placement groups). 
There is no charge for creating a placement group" and "The name of your placement group must be unique" are true for all placement groups.
